<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Hedgehog</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Passero+One&display=swap" rel="stylesheet">

  <script type="module" src="node_modules/@shoelace-style/shoelace/dist/shoelace.js"></script>
  <style>
    /* Essential layout styles only */
    html, body { margin: 0; height: 100%; }
    
    /* Hide content until CSS is fully loaded */
    body { visibility: hidden; }
    body.loaded { visibility: visible; }
    
    .title { 
      position: absolute;
      color: var(--sl-color-neutral-700);
      font-family: "Passero One", sans-serif;
      font-size: 56pt;
      left: 3%; 
      top: 3%;
      z-index: 1;
    }
    
    .top-buttons { 
      position: fixed; 
      top: 12px; 
      right: 12px; 
      display: flex; 
      gap: 8px;
      z-index: 100;
    }
    
    .mode-indicator-container { 
      position: fixed; 
      top: 60px; 
      right: 12px;
      z-index: 100;
    }
  </style>
</head>
<body>
<div class="title">The Hedgehog</div>
<div class="top-buttons">
  <sl-icon-button id="timer-toggle" name="stopwatch" label="Timer" style="font-size: 1.5rem;"></sl-icon-button>
  <sl-icon-button id="scramble-btn" name="shuffle" label="Scramble" style="font-size: 1.5rem;"></sl-icon-button>
  <sl-icon-button id="reset-btn" name="arrow-counterclockwise" label="Reset" style="font-size: 1.5rem;"></sl-icon-button>
  <sl-icon-button id="settings-toggle" name="gear" label="Settings" style="font-size: 1.5rem;"></sl-icon-button>
  <sl-icon-button id="info-toggle" name="question-circle" label="Info" style="font-size: 1.5rem;"></sl-icon-button>
</div>

<div class="mode-indicator-container">
    <sl-badge id="mode-indicator" variant="neutral" pill style="font-size: 1.5rem;">Mode: 3D Turns</sl-badge>
</div>

<div id="timer-container" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 100; display: none;">
  <div id="timer-display" style="font-size: 4rem; font-family: monospace; color: var(--sl-color-neutral-700); text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">00:00.00</div>
</div>

<sl-drawer id="settings-panel" label="Settings" placement="end">
  <div style="padding: 1rem;">
    <sl-divider></sl-divider>
    
    <div style="margin-bottom: 1.5rem;">
      <sl-range id="turn-speed-slider" label="Turn Speed" min="0.1" max="5" step="0.1" value="1" style="--thumb-size: 20px;">
        <div slot="help-text" id="turn-speed-value">1.0</div>
      </sl-range>
    </div>
    
    <div style="margin-bottom: 1.5rem;">
      <sl-range id="cubie-gap-slider" label="Cubie Gap" min="0" max="1" step="0.05" value="0.1" style="--thumb-size: 20px;">
        <div slot="help-text" id="cubie-gap-value">0.10</div>
      </sl-range>
    </div>
    
    <div style="margin-bottom: 1.5rem;">
      <sl-range id="hedgehog-angle-slider" label="Hedgehog Angle" min="0" max="55" step="1" value="35" style="--thumb-size: 20px;">
        <div slot="help-text" id="hedgehog-angle-value">35Â°</div>
      </sl-range>
    </div>
    
    <sl-divider></sl-divider>
    <h3>Cube Colors</h3>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">+W (Purple)</label>
        <sl-color-picker id="color-plus-w" value="#800080" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">-W (Pink)</label>
        <sl-color-picker id="color-minus-w" value="#ff88aa" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">+X (Red)</label>
        <sl-color-picker id="color-plus-x" value="#ff0000" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">-X (Orange)</label>
        <sl-color-picker id="color-minus-x" value="#ffa500" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">+Y (White)</label>
        <sl-color-picker id="color-plus-y" value="#ffffff" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">-Y (Yellow)</label>
        <sl-color-picker id="color-minus-y" value="#ffff00" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">+Z (Blue)</label>
        <sl-color-picker id="color-plus-z" value="#0000ff" size="small"></sl-color-picker>
      </div>
      <div>
        <label style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">-Z (Green)</label>
        <sl-color-picker id="color-minus-z" value="#00ff00" size="small"></sl-color-picker>
      </div>
    </div>
  </div>
</sl-drawer>

<sl-drawer id="info-panel" label="Controls & Help" placement="start">
  <div style="padding: 1rem;">
    <h2>About The Hedgehog</h2>
    <p style="line-height: 1.5;">
      The Hedgehog is a 4D 2x2 Puzzle visualization. It represents a 2x2x2x2 projected into 3D space. The current mode indicator shows which type of moves you can make:
    </p>
    <ul style="line-height: 1.6;">
      <li><strong>3D Turns:</strong> Turns that affect only one cube</li>
      <li><strong>4D Turns:</strong> Turns that affect portions of each cube</li>
      <li><strong>3D Rotations:</strong> Whole puzzle rotations in 3D</li>
      <li><strong>4D Rotations:</strong> Whole puzzle rotations simulating 4D rotations</li>
    </ul>

    <h2>Mouse Controls</h2>
    <div style="display: grid; gap: 0.5rem;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Click+Drag</sl-tag>
        <span>Rotate the camera</span>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Scroll</sl-tag>
        <span>Zoom in/out</span>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Left Click</sl-tag>
        <span>Clockwise Move</span>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Right Click</sl-tag>
        <span>Counter Clockwise Move</span>
      </div>
    </div>

    <h2>Mode Modifiers</h2>
    <div style="display: grid; gap: 0.5rem;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Shift</sl-tag>
        <span>Hold for 4D turns mode</span>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Ctrl</sl-tag>
        <span>Hold for rotation mode</span>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <sl-tag size="small">Shift+Ctrl</sl-tag>
        <span>Hold both for 4D rotations</span>
      </div>
    </div>
  </div>
</sl-drawer>
<script>
  // Show content once all resources are loaded
  window.addEventListener('load', function() {
    document.body.classList.add('loaded');
  });
</script>
<script type="module" src="/src/main.ts"></script>
</body>
</html>
